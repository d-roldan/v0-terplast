# Configuración de Mosquitto para MQTT + WebSocket

# Permitir conexiones anónimas (cambiar a false si usas autenticación)
allow_anonymous true

# Archivo de contraseñas (si usas autenticación)
# password_file /mosquitto/passwords/passwd

# Persistencia de datos
persistence true
persistence_location /mosquitto/data/

# Logs
log_dest file /mosquitto/log/mosquitto.log
log_dest stdout
log_type all

# ========================================
# LISTENER 1: MQTT sobre TCP (Node-RED)
# ========================================
listener 1883
protocol mqtt

# ========================================
# LISTENER 2: MQTT sobre WebSocket (Navegador)
# ========================================
listener 9001
protocol websockets

# Permitir conexiones desde cualquier origen
# En producción, considera restringir esto
websockets_log_level 255
</parameter>
